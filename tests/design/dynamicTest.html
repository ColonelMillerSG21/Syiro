<!DOCTYPE html>
<html manifest="test.appcache">
	<head>
		<title>Dynamic Rocket Testing</title>
		<link rel="stylesheet" type="text/css" href="css/rocket.css">
		<script type="text/javascript" src="js/rocket.js"></script>
		<script type="text/javascript" src="js/alternativeInit.min.js"></script>
		<meta charset="utf-8" />
	</head>
	<body>
		<div data-rocket-component="page"></div>
		<script>
			rocket.Init(); // Use the modern rocket.Init

			var generatedHeader = {};
			var generatedDropdownObject = {};

			if (rocket.device.IsSubHD == false){ // If the device is NOT sub HD
				generatedDropdownObject = rocket.dropdown.Generate(
						{
							"label" : "Test Dropdown",
							"items" : [	{ "label" : "Test Item" }, { "label" : "Second Test Item" }	],
							"position" : { "vertical" : "below", "horizontal" : "center"}
						}
				);

				generatedHeader = rocket.header.Generate(
					{
						"items" : [
							{
								"type" : "link",
								"link" : "https://stroblindustries.com",
								"content" : "Example Link"
							},
							{
								"type" : "dropdown",
								"component" : generatedDropdownObject
							}
						]
					}
				);

				var generatedSearchbox = rocket.searchbox.Generate(); // Generate a Searchbox
			}
			else{
				generatedDropdownObject = rocket.dropdown.Generate(
					{
						"icon" : "css/img/menu.png", // Icon only Dropdown
						"position" : { "vertical" : "below", "horizontal" : "right"}, // Different positioning
						"items" : [	{ "label" : "Test Item" }, { "label" : "Second Test Item" }	]
					}
				);

				var generatedHeader = rocket.header.Generate(
					{
						"items" : [
							{
								"type" : "dropdown",
								"component" : generatedDropdownObject
							}
						]
					}
				);
			}

			/* Share Dialogs List Generation */

			var sharedDialogItems = [
				{
					"image" : "img/facebook.png",
					"label" : "Facebook"
				},
				{
					"image" : "img/google-plus.png",
					"label" : "Google+"
				},
				{
					"image" : "img/twitter.png",
					"label" : "Twitter"
				}
			];

			var audioShareDialogList = rocket.list.Generate({ "items" : sharedDialogItems } );

			var videoShareDialogList = rocket.list.Generate({ "items" : sharedDialogItems } );

			/* End of Share Dialogs List Generation */

			var generatedAudioPlayer = rocket.audioplayer.Generate(
					{
						"sources": ["http://upload.wikimedia.org/wikipedia/commons/c/c8/Example.ogg", "http://www.noiseaddicts.com/samples/55.mp3" ],
						"art" : "http://upload.wikimedia.org/wikipedia/en/thumb/a/ac/XiphophorusLogoSVG.svg/132px-XiphophorusLogoSVG.svg.png",
						"title" : "Example OGG File",
						"artist" : "JesseW",
						"album": "Wikipedia",
						"share" : audioShareDialogList
					}
			);

			var generatedVideoPlayer = rocket.videoplayer.Generate(
					{
						"art" : "img/video-art.png",
						"sources" : ["http://download.blender.org/peach/trailer/trailer_400p.ogg", "http://download.blender.org/peach/trailer/trailer_480p.mov", "http://mirror.cessen.com/blender.org/peach/trailer/trailer_iphone.m4v", "http://video.webmfiles.org/big-buck-bunny_trailer.webm"],
						"share" : videoShareDialogList
					}
			);

			var generatedButton = rocket.button.Generate({"type" : "basic", "content" : "Hello"}); // Generate a Basic Button
			var generatedButtonTwo = rocket.button.Generate({"type" : "basic", "content" : "Change Source"}); // Generate a Basic Button that changes the video source
			var generatedToggle = rocket.button.Generate({"type" : "toggle"}); // Generate a Toggle Button
			var generatedFooter = rocket.footer.Generate({"content" : "Strobl Industries"}); // Generate a Footer

			if (rocket.device.IsSubHD == true){ // If the device is sub HD
				rocket.CSS(generatedDropdownObject, "float", "left"); // Float the Icon Header to the right
				rocket.CSS(generatedDropdownObject, "margin-left", "20px"); // Have some margin
			}

			rocket.CSS(generatedAudioPlayer, "margin-right", "80%"); // Set CSS margin for Audio Player
			rocket.CSS(generatedVideoPlayer, "margin-right", "80%"); // Set CSS margin for Video Player

			var generatedHeaderElement = rocket.Fetch(generatedHeader); // Fetch the Header
			document.querySelector("body").insertBefore(generatedHeaderElement, document.querySelector("body").firstChild);

			if (generatedSearchbox !== undefined){
				rocket.Add(true, generatedHeader, generatedSearchbox); // Append the Searchbox to the Header
			}

			document.querySelector('div[data-rocket-component="page"]').appendChild(rocket.Fetch(generatedButton));
			document.querySelector('div[data-rocket-component="page"]').appendChild(rocket.Fetch(generatedAudioPlayer));
			document.querySelector('div[data-rocket-component="page"]').appendChild(rocket.Fetch(generatedVideoPlayer));
			document.querySelector('div[data-rocket-component="page"]').appendChild(rocket.Fetch(generatedButtonTwo));
			document.querySelector("body").appendChild(rocket.Fetch(generatedFooter));

			rocket.AddListeners(generatedButton,
				function(x){
					var screenInfoElement = rocket.generator.ElementCreator("section", { "content" : window.screen.width.toString()});
					document.querySelector('div[data-rocket-component="page"]').insertBefore(screenInfoElement, document.querySelector('div[data-rocket-component="page"]').firstChild);
				}
			); // Listen to the Basic Button
			rocket.AddListeners(generatedButtonTwo, // Listen to the Basic Button
				function(x){
					var component = arguments[0];
					rocket.player.SetSources(generatedVideoPlayer, ["https://download.blender.org/durian/trailer/sintel_trailer-720p.ogv", "https://download.blender.org/durian/trailer/sintel_trailer-720p.mp4"]); // Change the source
				}
			);

			rocket.AddListeners(generatedSearchbox, function(x){console.log(arguments[1])}); // Listen to the Searchbox value change

			var testListItem = rocket.Define("list-item", 'div[data-rocket-component="list"][data-rocket-component-owner] > div:first-of-type');
			var secondListItem = rocket.Define("list-item", 'div[data-rocket-component="list"][data-rocket-component-owner] > div:nth-of-type(2)');

			rocket.listitem.SetLabel(testListItem, "First!");
			rocket.listitem.SetControl(testListItem, generatedToggle);

			rocket.AddListeners(generatedToggle, function(x){console.log(x)}); // Listen to the Generated Toggle Button
			rocket.AddListeners(secondListItem,
				function(){
							var listItemComponent = arguments[0];
							document.querySelector("body").querySelector('div[data-rocket-component="page"]').appendChild(
								rocket.generator.ElementCreator("section",
								{
									"content" : "y: " + rocket.component.FetchDimensionsAndPosition(document.querySelector('div[data-rocket-component="dropdown"]'))["y"]
								}
							)
						);

						document.querySelector("body").querySelector('div[data-rocket-component="page"]').appendChild(
							rocket.generator.ElementCreator("section",
							{
								"content" : "x: " + rocket.component.FetchDimensionsAndPosition(document.querySelector('div[data-rocket-component="dropdown"]'))["x"]
							}
						)
					);
				}
			); // Listen to the second List Item
		</script>
	</body>
</html>
